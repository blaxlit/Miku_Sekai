{% extends 'base.html' %}
{% block content %}
<div class="flex justify-between items-center mb-6 mt-4">
    <h1 class="text-3xl font-bold text-teal-600">‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á Miku Sekai üéµ</h1>
    {% if current_user.is_authenticated %}
        <a href="/songs/add" class="btn bg-teal-500 hover:bg-teal-600 border-none text-white shadow-md">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà</a>
    {% endif %}
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for song in songs %}
    <div class="card bg-white shadow-xl rounded-box hover:shadow-2xl transition-all">
        <div class="card-body">
            <h2 class="card-title text-teal-500 text-2xl">{{ song.title }}</h2>
            <p class="text-gray-600">‡πÇ‡∏î‡∏¢: <span class="font-semibold">{{ song.producer }}</span></p>
            
            <p class="text-xs text-gray-400 mt-1">
                üë§ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢: <span class="italic">{{ song.uploader.username }}</span>
            </p>
            
            <div class="card-actions justify-end mt-4">
                <a href="/song/{{ song.id }}" class="btn btn-sm bg-teal-50 text-teal-600 hover:bg-teal-100 border-none">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                {% if song.youtube_url %}
                <a href="{{ song.youtube_url }}" target="_blank" class="btn btn-sm btn-outline text-teal-600 border-teal-600 hover:bg-teal-600 hover:border-teal-600 hover:text-white">YouTube</a>
                {% endif %}
            </div>

            {% if current_user.is_authenticated and (current_user.id == song.user_id or current_user.role == 'admin') %}
            <div class="card-actions justify-end mt-4 pt-4 border-t border-gray-100">
                <a href="/songs/edit/{{ song.id }}" class="btn btn-sm btn-warning text-gray-800 font-bold">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
                <form action="/songs/delete/{{ song.id }}" method="POST" class="inline-block m-0">
                    <button type="submit" class="btn btn-sm btn-error text-white font-bold" onclick="return confirm('‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ?');">‡∏•‡∏ö</button>
                </form>
            </div>
            {% endif %}
            
        </div>
    </div>
    {% else %}
    <div class="col-span-full text-center py-20 bg-gray-50 rounded-box border-2 border-dashed border-gray-200">
        <p class="text-gray-500 text-lg font-medium">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏¢ ‡∏°‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞! ‚ú®</p>
    </div>
    {% endfor %}
</div>
{% endblock %}